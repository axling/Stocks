<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
  <head>
    <title>Stocks</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <link rel="stylesheet" href="css/layout.css" type="text/css" />
    <link rel="stylesheet" href="css/menu.css" type="text/css" />
  </head>
  <body>
    <div id="pagewidth" >
      <div id="header" >
	<erl>
out(A) ->
    {ehtml, [{ul, [{class, "menu"}], 
	      [{li, [], 
		[{a, [{href, "index.yaws"}, {class, active}], [{span, [], ["Start"]}]}]},
	       {li, [], 
		[{a, [{href, "stock.yaws"}], [{span, [], ["Stocks"]}]}]}]}]}.
        </erl>
      </div>
      <div id="wrapper" class="clearfix" >
	<div id="twocols" class="clearfix"> 
	  <div id="maincol" >
	    <erl>

out(A) ->
    BaseDir = "c:/erlang_proj/svn/stocks/db/",
    {ok, FileNames} = file:list_dir("c:/erlang_proj/svn/stocks/db/"),
    FilteredFileNames = lists:sort(lists:filter(fun(File) -> filelib:is_file(filename:join(BaseDir, File)) and
							    (filename:extension(File)==".dets") end, 
					   FileNames)),
    {ehtml, [{h1, [], ["Stocks"]},
	     {ul, [], 
	      lists:map(fun(Stock) ->
				StockName = filename:basename(Stock, ".dets"),
				{li, [], [{a, [{href, "stock.yaws?name=" ++ StockName}], 
					  [StockName]}]}
			end, FilteredFileNames)}]}.
	</erl>
        </div>
<div id="rightcol" ></div>
	    </div> 
<div id="leftcol" ></div>
</div>
	<div id="footer" > 
	</div>
	</div>
</body>

</html>


